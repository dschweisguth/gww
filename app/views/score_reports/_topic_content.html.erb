<%# The HTML generated by this partial and the partials it includes must work when pasted into a Flickr discussion topic. %>
<%# Briefly, newlines are treated as <br/>s and only some tags and attributes can be used. %>
<%# Also, the entire report must be < 40,756 characters (as tested by Octoferret). %>
<%# Usually reports are bigger than that, which Octoferret deals with by splitting them in half. %>
<%# In any case, it's important to avoid unnecessary bulk, which is why we use b instead of strong and no img height or width. %>
<%# alt and title are considered necessary for now. %>
<%# In the future we might try removing http://www.flickr.com from URLs in the posted version. %>
<%# Test by pasting it in to a Flickr discusion topic, e.g in the Guess Where SF Test group. %>
<b>updated <%= @report_date.strftime '%A, %B %e, %l %p' %></b>

<%= render 'score_reports/thumbnails',
    :change_name => 'new guess', :change_verb => '',
    :changes => @guesses, :people => @guessers -%>
<%= render 'score_reports/thumbnails',
    :change_name => 'photo', :change_verb => ' revealed',
    :changes => @revelations, :people => @revealers -%>
<%= render 'score_reports/high_scorers',
    :high_scorers => @weekly_high_scorers, :period => 'week' -%>
<%= render 'score_reports/high_scorers',
    :high_scorers => @monthly_high_scorers, :period => 'month' -%>

<%= render 'score_reports/top_posters',
    :top_posters => @weekly_top_posters, :period => 'week' -%>
<%= render 'score_reports/top_posters',
    :top_posters => @monthly_top_posters, :period => 'month' -%>

<%= pluralize @new_photos_count, 'photo' %> <%= singularize 'have', @new_photos_count %> been added to the pool since the previous report. There are still <a href="http://anythreewords.com/gwsf/"><%= @unfound_count %> unfound photos</a> in the pool.

<%= @total_correct_guessers %> people have made correct guesses. <%= @total_posters_only %> people have put at least one photo in the pool but not guessed any photos correctly. That means that at least <%= @total_participants %> of our <%= pluralize @member_count, 'member' %> have participated in the game.

Since the beginning of the game, <%= @total_single_guessers %> people have guessed one photo correctly. Here are the <%= @total_correct_guessers - @total_single_guessers %> people who've correctly guessed two or more photos. In parentheses following each name is the number of photos that person has put in the pool.

<% @people_by_score.keys.sort { |a, b| b <=> a }.each do |score| %>
<% next if score <= 1 %>
<b><%= score %></b> - <% @people_by_score[score].each_with_index do |person, i| %><%= link_to_person_url person %> (<%= person[:posts] %>)<% if i < @people_by_score[score].length - 1 %>, <% end %><% end %>
<% end %>
