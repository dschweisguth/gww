<%= render :partial => 'shared/breadcrumbs' %>
<hr/>
<h1><%= @people.length %> active members</h1>

<table class="dark">
<tr>
  <th class="empty"></th>
  <th><%= link_to_unless params[:sorted_by] == 'username', 'Member',
            list_people_url(:sorted_by => 'username') %></th>
  <th><%= link_to_unless(
            params[:sorted_by].nil? || params[:sorted_by] == 'score', 'Score',
            list_people_url(:sorted_by => 'score')) %></th>
  <th><%= link_to_unless params[:sorted_by] == 'posts', 'Posts',
            list_people_url(:sorted_by => 'posts') %></th>
  <th><%= link_to_unless params[:sorted_by] == 'guesses-per-day',
            'Guesses per day',
            list_people_url(:sorted_by => 'guesses-per-day') %></th>
  <th><%= link_to_unless params[:sorted_by] == 'posts-per-guess',
            'Posts per guess',
            list_people_url(:sorted_by => 'posts-per-guess') %></th>
</tr>
<% @people.each_with_index do |person, person_index| %>
<tr>
  <td class="row-number"><%= person_index + 1 %>.</td>
  <td><%= link_to_person person %></td>
  <td class="number"><%= person[:guess_count] %></td>
  <td class="number"><%= person[:post_count] %></td>
  <td class="number"><%= sprintf "%.4f", person[:guesses_per_day] %></td>
  <td class="number"><%= person[:posts_per_guess].infinite? ? '&#8734' : sprintf("%.4f", person[:posts_per_guess]) %></td>
</tr>
<% end %>
</table>

<hr/>
<%= render :partial => 'shared/breadcrumbs' %>
