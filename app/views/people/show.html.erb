<%= render :partial => 'breadcrumbs' %>
<hr/>

<h1><%=h @person.username %></h1>

On Flickr: <a href="http://www.flickr.com/people/<%= @person.flickrid %>/"><%=h @person.username %>'s profile</a> -
<a href="http://www.flickr.com/photos/<%= @person.flickrid %>/"><%=h @person.username %>'s photostream</a><br/>
In Guess Where SF:
<%= link_to "#{@person.username}'s posts", :action => 'posts', :id => @person %> -
<%= link_to "#{@person.username}'s guesses", :action => 'guesses', :id => @person %> -
<%= link_to "#{@person.username}'s comments", :action => 'comments', :id => @person %>
<br/><br/>

<b><%=h @person.username %> has posted <%=h @posted_count %> photos</b><br/>

<%= @unfound_photos.length %> <%= singularize 'remain', @unfound_photos.length %> unfound<% if ! @unfound_photos.find_all { |p| p.game_status == 'unconfirmed' }.empty? %> or <span class="unconfirmed">unconfirmed</span><% end %><%= @unfound_photos.empty? ? '.' : ':' %>
<% if ! @unfound_photos.empty? %>
<%   @unfound_photos.each_with_index do |photo, photo_index| -%>
<% if photo.game_status == 'unconfirmed' %><span class="unconfirmed"><% end %><%= link_to photo_index + 1, show_photo_url(photo) %><% if photo.game_status == 'unconfirmed' %></span><% end %>
<%   end -%>
<% end -%>
<br/>

<%= @revealed_photos.length %> <%= singularize 'were', @revealed_photos.length %> revealed<%= @revealed_photos.empty? ? '.' : ':' %>
<% if ! @revealed_photos.empty? %>
<%   @revealed_photos.each_with_index do |photo, photo_index| -%>
<%= link_to photo_index + 1, show_photo_url(photo) %>
<%   end -%>
<% end -%>
<br/>

<% @guessers.each do |guesser| %>
<%=  guesser[:photos].length %> <%= singularize 'were', guesser[:photos].length %> guessed by <%= link_to guesser[:person].username, show_person_url(guesser[:person]) %>:
<%   guesser[:photos].each_with_index do |photo, photo_index| %>
<%=    link_to photo_index + 1, show_photo_url(photo) %>
<%   end -%>
<br/>
<% end %>
<br/>

<b><%=h @person.username %> has correctly guessed <%=h @guessed_count %> photos</b><br/>

<% @posters.each do |poster| %>
<%=  poster[:photos].length %> <%= singularize 'were', poster[:photos].length %> posted by <%= link_to poster[:person].username, show_person_url(poster[:person]) %>
<%   poster[:photos].each_with_index do |photo, photo_index| -%>
<%=    link_to photo_index + 1, show_photo_url(photo) %>
<%   end -%>
<br/>
<% end %>

<hr/>
<%= render :partial => 'breadcrumbs' %>
