<%= render :partial => 'breadcrumbs' %>
<hr/>

<h1><%=h @person.username %></h1>

On Flickr: <a href="http://www.flickr.com/people/<%= @person.flickrid %>/"><%=h @person.username %>'s profile</a> -
<a href="http://www.flickr.com/photos/<%= @person.flickrid %>/"><%=h @person.username %>'s photostream</a><br/>
In Guess Where SF:
<a href="http://anythreewords.com/gwsf/index.php?pos=<%=h @person.username %>"><%= @person.username %>'s unfounds</a> -
<%= link_to "#{@person.username}'s posts", :action => 'posts', :id => @person %> -
<%= link_to "#{@person.username}'s guesses", :action => 'guesses', :id => @person %> -
<%= link_to "#{@person.username}'s comments", :action => 'comments', :id => @person %>
<br/><br/>

<%=h @person.username %> is <%= @tied ? 'tied for' : 'in' %> <%= ordinal @place %> place with a score of <%= @guesses.length %>.<br/>

<%= render :partial => 'people/show/high_scorers',
  :locals => { :high_scorers => @weekly_high_scorers, :period => 'week' } %>
<%= render :partial => 'people/show/high_scorers',
  :locals => { :high_scorers => @monthly_high_scorers, :period => 'month' } %>
<br/>

<%= render :partial => 'people/show/trophies',
  :locals => { :first_guess => @first_guess, :first_post => @first_post,
    :oldest_guess => @oldest_guess, :oldest_guess_place => @oldest_guess_place,
    :fastest_guess => @fastest_guess,
    :fastest_guess_place => @fastest_guess_place } %>

<b><%=h @person.username %> has correctly guessed <%=h @guesses.length %> photos</b><br/>

<% @posters.each do |poster| %>
<%=  poster[:guesses].length %> <%= singularize 'were', poster[:guesses].length %> posted by <%= link_to_person poster %>:
<%   poster[:guesses].each_with_index do |guess, i| -%>
<%=    link_to i + 1, show_photo_path(guess.photo) %>
<%   end -%>
<br/>
<% end %>
<br/>

<b><%=h @person.username %> has posted <%=h @posts.length %> photos</b><br/>

<%= @unfound_photos.length %> <%= singularize 'remain', @unfound_photos.length %> unfound<% if ! @unfound_photos.find_all { |p| p.game_status == 'unconfirmed' }.empty? %> or <span class="unconfirmed">unconfirmed</span><% end %><%= @unfound_photos.empty? ? '.' : ':' %>
<% if ! @unfound_photos.empty? %>
<%   @unfound_photos.each_with_index do |photo, photo_index| -%>
<% if photo.game_status == 'unconfirmed' %><span class="unconfirmed"><% end %><%= link_to photo_index + 1, show_photo_path(photo) %><% if photo.game_status == 'unconfirmed' %></span><% end %>
<%   end -%>
<% end -%>
<br/>

<%= @revealed_photos.length %> <%= singularize 'were', @revealed_photos.length %> revealed<%= @revealed_photos.empty? ? '.' : ':' %>
<% if ! @revealed_photos.empty? %>
<%   @revealed_photos.each_with_index do |photo, photo_index| -%>
<%= link_to photo_index + 1, show_photo_path(photo) %>
<%   end -%>
<% end -%>
<br/>

<% @guessers.each do |guesser| %>
<%=  guesser[:guessed_photos].length %> <%= singularize 'were', guesser[:guessed_photos].length %> guessed by <%= link_to_person guesser %>:
<%   guesser[:guessed_photos].each_with_index do |photo, photo_index| -%>
<%=    link_to photo_index + 1, show_photo_path(photo) %>
<%   end -%>
<br/>
<% end %>

<hr/>
<%= render :partial => 'breadcrumbs' %>
