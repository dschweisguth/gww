<%= render :partial => 'shared/breadcrumbs' %>
<hr/>
<h1><%= @guesses_count %> correct guesses</h1>

<table width="1600">
  <tr>
    <td class="dholder">
      <table class="dark" width="400">
<% @last_days.each do |day| -%>
        <tr>
          <td colspan="2" class="cellspace">&nbsp;</td>
        </tr>
        <tr>
          <th colspan="2">on <%= day[:dates][:begin].strftime '%A, %b. %d' %></th>
        </tr>
<% day[:scores].each do |person_list| -%>
        <tr>
          <td class="dcurrency"><%= person_list[:guesscount] %></td>
          <td class="dvalue"><%=h person_list[:people].map { |p| p[:person].username }.join ', ' %></td>
        </tr>
<% end -%>
<% end -%>
      </table>
    </td>
    <td class="dholder">
      <table class="dark" width="400">
<% @last_weeks.each_with_index do |week, week_index| -%>
        <tr>
          <td colspan="2" class="cellspace">&nbsp;</td>
        </tr>
        <tr>
          <th colspan="2">for the week of <%= week[:dates][:begin].strftime '%b. %d' %><% if week_index == 0 -%> so far ...<% end -%></th>
        </tr>
<% week[:scores].each do |person_list| -%>
        <tr>
          <td class="dcurrency"><%= person_list[:guesscount] %></td>
          <td class="dvalue"><%= person_list[:people].map { |p| p[:person].username }.join ', ' %></td>
        </tr>
<% end -%>
<% end -%>
      </table>
    </td>
    <td class="dholder">
      <table class="dark" width="400">
<% @last_months.each_with_index do |month, month_index| -%>
        <tr>
          <td colspan="2" class="cellspace">&nbsp;</td>
        </tr>
        <tr>
          <th colspan="2">for <%= month[:dates][:begin].strftime '%B %Y' %><% if month_index == 0 -%> so far ...<% end -%></th>
        </tr>
<% month[:scores].each do |person_list| -%>
        <tr>
          <td class="dcurrency"><%= person_list[:guesscount] %></td>
          <td class="dvalue"><%= person_list[:people].map { |p| p[:person].username }.join ', ' %></td>
        </tr>
<% end -%>
<% end -%>
      </table>
    </td>
    <td class="dholder">
      <table class="dark" width="400">
<% @last_years.each_with_index do |year, year_index| -%>
        <tr>
          <td colspan="2" class="cellspace">&nbsp;</td>
        </tr>
        <tr>
          <th colspan="2">for <%= year[:dates][:begin].strftime '%Y' %><% if year_index == 0 -%> so far ...<% end -%></th>
        </tr>
<% year[:scores].each do |person_list| -%>
        <tr>
          <td class="dcurrency"><%= person_list[:guesscount] %></td>
          <td class="dvalue"><%= person_list[:people].map { |p| p[:person].username }.join ', ' %></td>
        </tr>
<% end -%>
<% end -%>
      </table>
    </td>
  </tr>
</table>

<hr/>
<%= render :partial => 'shared/breadcrumbs' %>
